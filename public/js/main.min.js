import onReady from"./modules/onReady.min.js";import showError from"./modules/showError.min.js";onReady(()=>{var e=document.getElementById("get-poll-results-form");const r=document.getElementById("post-url-input"),s=document.getElementById("view-results-btn");document.getElementById("show-example").addEventListener("click",e=>{e.preventDefault(),r.value="https://stefanbohacek.online/@stefan/111284206579024132",s.focus()}),e.addEventListener("submit",async e=>{e.preventDefault(),s.disabled=!0;try{var o=r.value,t=new URL(o),n=await(await fetch("https://fediverse-info.stefanbohacek.com/node-info?domain="+t.host)).json();["mastodon"].includes(n?.software?.name)?window.location.href="/poll?url="+encodeURIComponent(o):showError("not_supported")}catch(e){showError("general"),console.log("poll_results_viewer_error:",e)}s.disabled=!1})});
//# sourceMappingURL=main.min.js.map
