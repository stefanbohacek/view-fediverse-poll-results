import onReady from"./modules/onReady.min.js";import showError from"./modules/showError.min.js";onReady(()=>{var e=document.getElementById("get-poll-results-form");const s=document.getElementById("post-url-input"),r=document.getElementById("view-results-btn");document.getElementById("show-example").addEventListener("click",e=>{e.preventDefault(),s.value="https://stefanbohacek.online/@stefan/111284206579024132",r.focus()}),e.addEventListener("submit",async e=>{e.preventDefault(),r.disabled=!0;try{var o=s.value,t=new URL(o),n=await(await fetch("https://fediverse-info.stefanbohacek.dev/node-info?domain="+t.host)).json();console.log({domain:t.host,info:n}),["mastodon"].includes(n?.software?.name)?window.location.href="/poll?url="+encodeURIComponent(o):showError("not_supported")}catch(e){showError("general"),console.log("poll_results_viewer_error:",e)}r.disabled=!1})});
//# sourceMappingURL=main.min.js.map
